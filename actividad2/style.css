/* --- Configuración General --- */
body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    background-color: #1a1e28; /* Un fondo azul oscuro más cercano al de la imagen */
    overflow: hidden;
    perspective: 1000px; /* Para futuras animaciones 3D si quisiéramos */
}

.escenario {
    position: relative;
    width: 600px;
    height: 350px; /* Un poco más alto para el personaje */
    background: linear-gradient(to top, #2f3a52 0%, #1a1e28 70%); /* Gradiente azulado/grisáceo */
    border-radius: 15px;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
    overflow: hidden;
    /* Elemento que simulará la roca debajo del Caballero */
}
.escenario::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100px; /* Altura de la roca */
    background: #252a3a; /* Color base de la roca */
    clip-path: polygon(0 100%, 0 50%, 15% 40%, 30% 60%, 50% 30%, 70% 50%, 85% 40%, 100% 60%, 100% 100%);
    z-index: 0;
    filter: brightness(0.8);
}

/* --- Contenedor y Animación Principal (Movimiento lateral) --- */
.caballero-contenedor {
    position: absolute;
    bottom: 80px; /* Elevado para que se apoye en la "roca" */
    width: 120px; /* Ancho total del personaje */
    height: 140px; /* Alto total del personaje */
    transform-origin: bottom center; /* Para que gire desde los pies */
    animation: patrullar 12s ease-in-out infinite; /* Sincronizamos con el idle/caminata */
}

/* --- Estructura del Caballero (Ahora más detallada) --- */
.caballero {
    position: relative;
    width: 100%;
    height: 100%;
    /* Animación de balanceo al caminar y flotación */
    animation: balanceo-y-floteo 12s ease-in-out infinite;
    transform-style: preserve-3d; /* Para sombras y profundidad */
}

.cabeza {
    position: absolute;
    width: 70px; /* Ancho de la cabeza */
    height: 65px; /* Alto de la cabeza */
    background: #e9ecef; /* Blanco hueso para la cabeza */
    border-radius: 50% / 60% 60% 40% 40%; /* Forma redondeada en la parte superior */
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2), 0 0 15px rgba(255, 255, 255, 0.3); /* Sombra y brillo */
    z-index: 4;
}

/* Cuernos - Pseudo-elementos de la cabeza */
.cabeza::before, .cabeza::after {
    content: '';
    position: absolute;
    background: #e0e0e0; /* Un gris más claro para los cuernos */
    width: 18px;
    height: 55px;
    border-radius: 8px 8px 0 0; /* Forma de cuerno */
    top: -30px; /* Se extienden hacia arriba */
    z-index: 3;
    box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);
}

.cabeza::before { /* Cuerno izquierdo */
    left: 8px;
    transform: rotate(-35deg);
    transform-origin: bottom center;
}

.cabeza::after { /* Cuerno derecho */
    right: 8px;
    transform: rotate(35deg);
    transform-origin: bottom center;
}

/* Ojos - Usamos un solo pseudo-elemento para los ojos oscuros y grandes */
.cabeza div { /* div interno para los ojos */
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden; /* Para recortar los ojos */
}

.cabeza div::before, .cabeza div::after {
    content: '';
    position: absolute;
    background: #111; /* Negro profundo para los ojos */
    width: 30px;
    height: 55px; /* Ojos alargados */
    border-radius: 50%;
    top: 15px;
}
.cabeza div::before { /* Ojo izquierdo */
    left: 10px;
    transform: rotate(-10deg);
}
.cabeza div::after { /* Ojo derecho */
    right: 10px;
    transform: rotate(10deg);
}


.cuerpo {
    position: absolute;
    width: 45px; /* Ancho del cuerpo */
    height: 60px; /* Alto del cuerpo */
    background: #212529; /* Color oscuro del cuerpo */
    top: 55px; /* Justo debajo de la cabeza */
    left: 50%;
    transform: translateX(-50%);
    border-radius: 10px 10px 40% 40%;
    z-index: 3;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.5);
}

.capa {
    position: absolute;
    width: 70px; /* Ancho de la capa */
    height: 90px; /* Alto de la capa */
    background: #343a40; /* Gris oscuro para la capa */
    top: 50px; /* Un poco por encima del cuerpo */
    left: 50%;
    transform: translateX(-50%) translateZ(-5px); /* Un poco hacia atrás para la profundidad */
    border-radius: 10px 10px 60% 60%;
    z-index: 2; /* Detrás del cuerpo pero delante del aguijón */
    transform-origin: top center;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
    animation: mover-capa 2s ease-in-out infinite alternate;
}

/* Pliegues/sombras en la capa */
.capa::before, .capa::after {
    content: '';
    position: absolute;
    width: 10px;
    height: 50px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    top: 20px;
}
.capa::before {
    left: 15px;
    transform: rotate(10deg);
}
.capa::after {
    right: 15px;
    transform: rotate(-10deg);
}


.aguijon {
    position: absolute;
    width: 10px; /* Grosor del aguijón */
    height: 80px; /* Longitud del aguijón */
    background: #ced4da; /* Gris claro para la hoja */
    top: 60px; /* Posición vertical */
    left: -20px; /* Se extiende a la izquierda del cuerpo */
    transform: rotate(-20deg); /* Inclinación del aguijón */
    border-radius: 5px;
    z-index: 1;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    /* Mango del aguijón */
}

.aguijon::before {
    content: '';
    position: absolute;
    width: 12px;
    height: 15px;
    background: #343a40; /* Color del mango */
    border-radius: 3px;
    bottom: -5px;
    left: -1px;
    transform: rotate(-10deg);
}

/* --- Definición de Keyframes (Animaciones) --- */

/* 1. Animación de patrulla: Mueve todo el contenedor de lado a lado */
@keyframes patrullar {
    0% {
        transform: translateX(-150px); /* Punto de inicio (izquierda) */
    }
    40% {
        transform: translateX(150px); /* Va a la derecha */
    }
    50% {
        transform: translateX(150px); /* Pausa en la derecha */
    }
    90% {
        transform: translateX(-150px); /* Vuelve a la izquierda */
    }
    100% {
        transform: translateX(-150px); /* Pausa en la izquierda */
    }
}

/* 2. Balanceo del cuerpo al caminar y flotación en la pausa */
@keyframes balanceo-y-floteo {
    /* --- Caminata a la derecha --- */
    0% { transform: rotateY(0deg) translateY(0); }
    10%, 30% { transform: rotateY(0deg) translateY(-3px) rotateZ(3deg); } /* Inclinación y pequeño salto */
    20%, 40% { transform: rotateY(0deg) translateY(0px) rotateZ(-3deg); }

    /* --- Pausa en la derecha (floteo/idle) --- */
    45% { transform: rotateY(0deg) translateY(-5px); } /* Sube más */
    50% { transform: rotateY(0deg) translateY(0px); } /* Baja */
    55% { transform: rotateY(0deg) translateY(-5px); } /* Sube */

    /* --- Gira para caminar a la izquierda --- */
    59% { transform: rotateY(0deg) translateY(0); }
    60% { transform: rotateY(180deg) translateY(0); } /* Giro instantáneo */

    /* --- Caminata a la izquierda --- */
    70%, 90% { transform: rotateY(180deg) translateY(-3px) rotateZ(3deg); }
    80% { transform: rotateY(180deg) translateY(0px) rotateZ(-3deg); }

    /* --- Pausa en la izquierda (floteo/idle) --- */
    95% { transform: rotateY(180deg) translateY(-5px); } /* Sube más */
    100% { transform: rotateY(180deg) translateY(0px); } /* Baja */
}

/* 3. Movimiento sutil de la capa */
@keyframes mover-capa {
    0% { transform: translateX(-50%) rotate(2deg) translateY(0px); }
    50% { transform: translateX(-50%) rotate(-2deg) translateY(-3px); }
    100% { transform: translateX(-50%) rotate(2deg) translateY(0px); }
}